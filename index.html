<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Report: The Laws of Electromagnetism</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chosen Palette: Warm Neutral (Slate, Amber, Stone) -->
    <!-- Application Structure Plan: A single-page application with a sticky top navigation bar (Introduction, The Laws, Applications, Synthesis) to switch between content sections. The core 'The Laws' section uses a prominent sub-navigation to explore each law individually, pairing explanatory text with a custom interactive Canvas visualization to enhance understanding. This thematic, task-oriented structure is chosen over a linear report format to allow users to freely explore concepts and see their direct applications, improving engagement and knowledge retention. -->
    <!-- Visualization & Content Choices: Faraday's Law -> Goal: Explain induction -> Viz: Interactive Canvas animation of a magnet and coil -> Interaction: User clicks to move magnet, sees induced current -> Justification: Demonstrates the dynamic nature of induction. Lenz's Law -> Goal: Show directionality -> Viz: Integrated into Faraday animation with magnetic pole indicators -> Interaction: Implicit from user's action -> Justification: Shows cause and effect. Maxwell's Equations -> Goal: Unification & EM Waves -> Viz: HTML/CSS for equations, Canvas for wave animation -> Interaction: Click to expand equation details -> Justification: Makes dense info digestible and visualizes the key prediction. Lorentz Force -> Goal: Force on charges -> Viz: Interactive Canvas particle simulation -> Interaction: User controls charge/velocity, observes trajectory -> Justification: Provides intuitive feel for the vector force. Applications -> Goal: Connect to tech -> Viz: Simple CSS/Canvas animations (motor, transformer) -> Interaction: Passive animation -> Justification: Quickly conveys core mechanical principles. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap');
        .nav-link {
            transition: color 0.3s, border-color 0.3s;
        }
        .nav-link.active {
            color: #f59e0b; 
            border-bottom-color: #f59e0b;
        }
        .law-button.active {
            background-color: #f59e0b;
            color: #1c1917;
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 40vh;
        }
        .equation-card {
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .equation-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        .equation-details {
            display: none;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out;
        }
        .equation-details.open {
            display: block;
            max-height: 500px;
        }
    </style>
</head>
<body class="bg-stone-50 text-slate-800">

    <header class="bg-slate-800 text-white p-4 shadow-lg text-center">
        <h1 class="text-3xl md:text-4xl font-bold tracking-tight">The Laws of Electromagnetism</h1>
        <p class="text-slate-300 mt-1">An Interactive Exploration</p>
    </header>

    <nav class="sticky top-0 bg-white/80 backdrop-blur-md shadow-md z-10">
        <div class="container mx-auto px-4">
            <div class="flex justify-center items-center space-x-4 md:space-x-8 h-16">
                <a href="#introduction" class="nav-link text-slate-600 hover:text-amber-500 font-medium border-b-2 border-transparent pb-1" data-section="introduction">Introduction</a>
                <a href="#laws" class="nav-link text-slate-600 hover:text-amber-500 font-medium border-b-2 border-transparent pb-1" data-section="laws">The Laws</a>
                <a href="#applications" class="nav-link text-slate-600 hover:text-amber-500 font-medium border-b-2 border-transparent pb-1" data-section="applications">Applications</a>
                <a href="#synthesis" class="nav-link text-slate-600 hover:text-amber-500 font-medium border-b-2 border-transparent pb-1" data-section="synthesis">Synthesis</a>
            </div>
        </div>
    </nav>

    <main class="container mx-auto p-4 md:p-8">
        
        <section id="introduction" class="content-section">
            <h2 class="text-3xl font-bold text-slate-900 mb-4 text-center">The Four Pillars of Electrodynamics</h2>
            <div class="max-w-3xl mx-auto bg-white p-6 rounded-lg shadow-sm">
                <p class="text-lg text-slate-700 mb-4">Electromagnetism is a fundamental force of nature governing the interactions between electrically charged particles. The framework describing this force, a monumental achievement of 19th-century physics, rests on the work of Faraday, Lenz, Maxwell, and Lorentz. Their laws transformed disparate observations into a single, elegant, and profoundly predictive theory.</p>
                <p class="text-lg text-slate-700">This interactive application explores these foundational principles. We will see how Maxwell's equations describe the behavior of fields, how the Lorentz force dictates their interaction with matter, and how the laws of Faraday and Lenz explain the crucial phenomenon of induction. Navigate through the sections to see how these abstract laws power our modern world.</p>
            </div>
        </section>

        <section id="laws" class="content-section">
            <h2 class="text-3xl font-bold text-slate-900 mb-6 text-center">Exploring the Fundamental Laws</h2>
            <div class="flex justify-center flex-wrap gap-2 mb-8">
                <button class="law-button px-4 py-2 bg-white text-slate-700 rounded-full shadow-sm hover:bg-amber-400 transition" data-law="faraday">Faraday & Lenz's Laws</button>
                <button class="law-button px-4 py-2 bg-white text-slate-700 rounded-full shadow-sm hover:bg-amber-400 transition" data-law="maxwell">Maxwell's Equations</button>
                <button class="law-button px-4 py-2 bg-white text-slate-700 rounded-full shadow-sm hover:bg-amber-400 transition" data-law="lorentz">Lorentz Force</button>
            </div>

            <div id="law-content-container"></div>
        </section>

        <section id="applications" class="content-section">
            <h2 class="text-3xl font-bold text-slate-900 mb-6 text-center">Technology in Action</h2>
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <h3 class="text-2xl font-bold text-amber-600 mb-3">Motor & Generator</h3>
                    <p class="text-slate-600 mb-4">A perfect illustration of duality. A motor uses the Lorentz force to convert electrical energy into mechanical motion. A generator uses Faraday's Law to do the reverse, converting mechanical motion into electrical energy. They are fundamentally the same device operated in reverse.</p>
                    <div class="chart-container h-48">
                        <canvas id="motor-canvas" class="w-full h-full"></canvas>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <h3 class="text-2xl font-bold text-amber-600 mb-3">The Transformer</h3>
                    <p class="text-slate-600 mb-4">Essential for power distribution, a transformer uses Faraday's Law to change AC voltages. A changing current in a primary coil creates a changing magnetic flux, which induces a current in a secondary coil with a different number of turns, altering the voltage.</p>
                     <div class="chart-container h-48">
                        <canvas id="transformer-canvas" class="w-full h-full"></canvas>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-lg md:col-span-2 lg:col-span-1">
                    <h3 class="text-2xl font-bold text-amber-600 mb-3">Antennas</h3>
                    <p class="text-slate-600 mb-4">Antennas are the bridge to wireless communication. A transmitting antenna accelerates charges to create propagating electromagnetic waves (predicted by Maxwell). A receiving antenna captures these waves, whose fields exert a Lorentz force on electrons to create a detectable current.</p>
                     <div class="chart-container h-48">
                        <canvas id="antenna-canvas" class="w-full h-full"></canvas>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="synthesis" class="content-section">
            <h2 class="text-3xl font-bold text-slate-900 mb-6 text-center">A Unified Theory</h2>
            <div class="max-w-4xl mx-auto bg-white p-6 rounded-lg shadow-lg">
                <p class="text-lg text-slate-700 mb-6 text-center">The laws of electromagnetism are not isolated rules but a deeply interconnected system. This diagram illustrates how sources (charges and currents) generate fields, how fields interact and propagate, and how they ultimately exert forces on matter, forming a complete, self-consistent framework.</p>
                <div class="relative p-8">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                        <div class="text-center p-4 bg-slate-100 rounded-lg shadow">
                            <h4 class="font-bold text-lg">Sources</h4>
                            <p>Charges (ρ) & Currents (J)</p>
                        </div>
                        <div class="relative text-center p-4 bg-slate-100 rounded-lg shadow">
                            <h4 class="font-bold text-lg">Fields</h4>
                            <p>Electric (E) & Magnetic (B)</p>
                        </div>
                        <div class="text-center p-4 bg-slate-100 rounded-lg shadow">
                            <h4 class="font-bold text-lg">Interaction</h4>
                            <p>Lorentz Force on other charges</p>
                            <p class="font-mono text-sm mt-1">F = qE + q(v x B)</p>
                        </div>
                        <div class="text-center p-4 bg-slate-100 rounded-lg shadow">
                            <h4 class="font-bold text-lg">Propagation</h4>
                            <p>Electromagnetic Waves (Light)</p>
                        </div>
                    </div>
                    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-48 h-48 bg-amber-400/80 rounded-lg flex items-center justify-center text-center text-slate-900 font-bold p-4 shadow-xl z-10">
                        Maxwell's Equations
                    </div>
                </div>
            </div>
        </section>

    </main>

    <script>
        const lawData = {
            faraday: {
                title: "Faraday's Law of Induction & Lenz's Law",
                content: `
                    <div class="grid md:grid-cols-2 gap-8 items-center">
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-2xl font-bold text-amber-600 mb-3">The Principle of Induction</h3>
                            <p class="text-slate-600 mb-2"><strong>Faraday's Law</strong> states that a changing magnetic flux through a circuit induces an electromotive force (EMF), or voltage. It's not the strength of the magnetic field that matters, but how quickly it changes. The induced EMF is given by: <strong class="font-mono">emf = -N (dΦB/dt)</strong>.</p>
                            <p class="text-slate-600"><strong>Lenz's Law</strong>, represented by the negative sign, provides the direction. It states that the induced current will flow in a direction that creates a magnetic field to <strong class="text-red-600">oppose</strong> the change in flux that produced it. This is a consequence of the conservation of energy.</p>
                            <div class="mt-4 flex gap-2 justify-center">
                                <button id="push-magnet" class="px-4 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-600 transition">Push Magnet In</button>
                                <button id="pull-magnet" class="px-4 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-600 transition">Pull Magnet Out</button>
                            </div>
                        </div>
                        <div class="bg-white p-4 rounded-lg shadow-md">
                            <div class="chart-container h-64">
                                <canvas id="faraday-canvas" class="w-full h-full"></canvas>
                            </div>
                        </div>
                    </div>
                `
            },
            maxwell: {
                title: "Maxwell's Equations: The Unification",
                content: `
                    <div class="grid md:grid-cols-2 gap-8 items-start">
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-2xl font-bold text-amber-600 mb-3">The Four Equations</h3>
                            <p class="text-slate-600 mb-4">Maxwell synthesized the laws of electricity and magnetism into four elegant equations that describe how fields are generated and alter each other. Click each law to learn more.</p>
                            <div class="space-y-2">
                                <div class="equation-card border border-slate-200 rounded-lg p-3" data-eq="1">
                                    <strong class="text-slate-800">1. Gauss's Law for Electricity</strong>
                                    <div class="equation-details text-sm text-slate-600 mt-2" id="eq-details-1">Relates the electric field to its source: electric charge. Field lines originate on positive charges and terminate on negative ones.</div>
                                </div>
                                <div class="equation-card border border-slate-200 rounded-lg p-3" data-eq="2">
                                    <strong class="text-slate-800">2. Gauss's Law for Magnetism</strong>
                                    <div class="equation-details text-sm text-slate-600 mt-2" id="eq-details-2">States that there are no magnetic monopoles. Magnetic field lines always form closed loops.</div>
                                </div>
                                <div class="equation-card border border-slate-200 rounded-lg p-3" data-eq="3">
                                    <strong class="text-slate-800">3. Maxwell-Faraday Law</strong>
                                    <div class="equation-details text-sm text-slate-600 mt-2" id="eq-details-3">A changing magnetic field creates a circulating electric field. This is the basis for transformers.</div>
                                </div>
                                <div class="equation-card border border-slate-200 rounded-lg p-3" data-eq="4">
                                    <strong class="text-slate-800">4. Ampère-Maxwell Law</strong>
                                    <div class="equation-details text-sm text-slate-600 mt-2" id="eq-details-4">A magnetic field is created by an electric current AND by a changing electric field (the "displacement current"). This was Maxwell's key insight.</div>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white p-4 rounded-lg shadow-md">
                            <h3 class="text-xl font-bold text-center mb-2">Prediction: EM Waves</h3>
                            <p class="text-slate-600 text-sm text-center mb-2">The symmetry revealed by the displacement current implies that changing E and B fields can regenerate each other, propagating through space as a wave at the speed of light.</p>
                            <div class="chart-container h-64">
                                <canvas id="maxwell-canvas" class="w-full h-full"></canvas>
                            </div>
                        </div>
                    </div>
                `
            },
            lorentz: {
                title: "The Lorentz Force Law",
                content: `
                    <div class="grid md:grid-cols-2 gap-8 items-center">
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-2xl font-bold text-amber-600 mb-3">Force on Charged Particles</h3>
                            <p class="text-slate-600 mb-2">This law describes the force experienced by a charged particle moving in electric and magnetic fields: <strong class="font-mono">F = qE + q(v x B)</strong>.</p>
                            <ul class="list-disc list-inside text-slate-600 space-y-1">
                                <li>The <strong>electric force</strong> (qE) acts parallel to the E-field and can change the particle's speed.</li>
                                <li>The <strong>magnetic force</strong> (q(v x B)) acts perpendicular to both velocity (v) and the B-field. It can only change the particle's direction, not its speed.</li>
                            </ul>
                            <div class="mt-4 space-y-2">
                                <div class="flex items-center gap-2">
                                    <label for="charge-slider" class="font-medium text-sm">Charge:</label>
                                    <input id="charge-slider" type="range" min="-1" max="1" value="1" step="2" class="w-full">
                                    <span id="charge-label" class="font-bold w-16 text-right">Positive</span>
                                </div>
                                <button id="launch-particle" class="w-full px-4 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-600 transition">Launch Particle</button>
                            </div>
                        </div>
                        <div class="bg-white p-4 rounded-lg shadow-md">
                            <div class="chart-container h-64">
                                <canvas id="lorentz-canvas" class="w-full h-full"></canvas>
                            </div>
                        </div>
                    </div>
                `
            }
        };

        let activeAnimations = {};

        function stopAllAnimations() {
            Object.values(activeAnimations).forEach(anim => {
                if (anim && typeof anim.stop === 'function') {
                    anim.stop();
                }
            });
            activeAnimations = {};
        }

        function setupNavigation() {
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('.content-section');

            function updateActiveState(activeSectionId) {
                stopAllAnimations();
                navLinks.forEach(link => {
                    link.classList.toggle('active', link.dataset.section === activeSectionId);
                });
                sections.forEach(section => {
                    section.classList.toggle('active', section.id === activeSectionId);
                });

                if (activeSectionId === 'laws') {
                    const firstLawButton = document.querySelector('.law-button');
                    if (firstLawButton) {
                        showLawContent(firstLawButton.dataset.law);
                        updateActiveLawButton(firstLawButton.dataset.law);
                    }
                } else if (activeSectionId === 'applications') {
                    setTimeout(() => {
                        activeAnimations.motor = animateMotor();
                        activeAnimations.transformer = animateTransformer();
                        activeAnimations.antenna = animateAntenna();
                    }, 0);
                }
            }

            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const sectionId = e.target.dataset.section;
                    updateActiveState(sectionId);
                    window.history.pushState(null, '', `#${sectionId}`);
                });
            });

            const initialSection = window.location.hash.substring(1) || 'introduction';
            updateActiveState(initialSection);
        }

        function setupLawNavigation() {
            const lawButtons = document.querySelectorAll('.law-button');
            lawButtons.forEach(button => {
                button.addEventListener('click', () => {
                    showLawContent(button.dataset.law);
                    updateActiveLawButton(button.dataset.law);
                });
            });
        }

        function updateActiveLawButton(activeLaw) {
            document.querySelectorAll('.law-button').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.law === activeLaw);
            });
        }

        function showLawContent(law) {
            stopAllAnimations();
            const container = document.getElementById('law-content-container');
            container.innerHTML = lawData[law].content;

            setTimeout(() => {
                if (law === 'faraday') {
                    activeAnimations.faraday = animateFaraday();
                } else if (law === 'maxwell') {
                    activeAnimations.maxwell = animateMaxwellWave();
                    document.querySelectorAll('.equation-card').forEach(card => {
                        card.addEventListener('click', () => {
                            const detailsId = `eq-details-${card.dataset.eq}`;
                            const detailsEl = document.getElementById(detailsId);
                            detailsEl.classList.toggle('open');
                        });
                    });
                } else if (law === 'lorentz') {
                    activeAnimations.lorentz = animateLorentzForce();
                }
            }, 0);
        }

        function animateFaraday() {
            const canvas = document.getElementById('faraday-canvas');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            let animationFrameId;

            let magnet = { x: 50, y: canvas.clientHeight / 2, width: 30, height: 80, speed: 0, targetX: 50 };
            let coil = { x: 250, y: canvas.clientHeight / 2, width: 50, height: 120, turns: 5 };
            let bulb = { x: 400, y: canvas.clientHeight / 2, radius: 20, brightness: 0 };

            document.getElementById('push-magnet').onclick = () => magnet.targetX = 200;
            document.getElementById('pull-magnet').onclick = () => magnet.targetX = 50;

            function draw() {
                const dpr = window.devicePixelRatio || 1;
                canvas.width = canvas.clientWidth * dpr;
                canvas.height = canvas.clientHeight * dpr;
                ctx.scale(dpr, dpr);
                
                const w = canvas.clientWidth;
                const h = canvas.clientHeight;
                ctx.clearRect(0, 0, w, h);

                coil.y = h / 2;
                bulb.y = h / 2;
                magnet.y = h/2;

                ctx.strokeStyle = '#475569';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(coil.x, coil.y - coil.height / 2);
                ctx.lineTo(350, coil.y - coil.height / 2);
                ctx.lineTo(350, bulb.y - bulb.radius);
                ctx.moveTo(350, bulb.y + bulb.radius);
                ctx.lineTo(350, coil.y + coil.height / 2);
                ctx.lineTo(coil.x, coil.y + coil.height / 2);
                ctx.stroke();

                ctx.fillStyle = `rgba(255, 255, 0, ${bulb.brightness})`;
                ctx.beginPath();
                ctx.arc(bulb.x, bulb.y, bulb.radius, 0, Math.PI * 2);
                ctx.fill();
                ctx.strokeStyle = '#475569';
                ctx.stroke();

                for (let i = 0; i < coil.turns; i++) {
                    ctx.beginPath();
                    ctx.ellipse(coil.x, coil.y, coil.width / 4, coil.height / 2, 0, 0, Math.PI * 2);
                    ctx.stroke();
                }

                ctx.fillStyle = '#ef4444';
                ctx.fillRect(magnet.x, magnet.y - magnet.height / 2, magnet.width, magnet.height / 2);
                ctx.fillStyle = '#3b82f6';
                ctx.fillRect(magnet.x, magnet.y, magnet.width, magnet.height / 2);
                ctx.fillStyle = 'white';
                ctx.font = 'bold 16px sans-serif';
                ctx.textAlign = 'center';
                ctx.fillText('N', magnet.x + magnet.width / 2, magnet.y - magnet.height / 4 + 6);
                ctx.fillText('S', magnet.x + magnet.width / 2, magnet.y + magnet.height / 4 + 6);

                if (bulb.brightness > 0.9) {
                    ctx.fillStyle = '#f59e0b';
                    ctx.font = 'bold 16px sans-serif';
                    let poleText = magnet.speed > 0 ? 'N' : 'S';
                    let poleX = coil.x - coil.width/2 - 15;
                    ctx.fillText(poleText, poleX, coil.y);
                    ctx.fillText('Opposing Field!', poleX, coil.y + 20);
                }
            }

            function update() {
                let dx = magnet.targetX - magnet.x;
                magnet.speed = dx * 0.1;
                magnet.x += magnet.speed;
                
                let proximity = 1 - Math.abs(magnet.x - (coil.x - magnet.width)) / (coil.x - 50);
                proximity = Math.max(0, Math.min(1, proximity));
                
                bulb.brightness = Math.abs(magnet.speed * proximity) / 10;
                bulb.brightness = Math.min(1, bulb.brightness);

                draw();
                animationFrameId = requestAnimationFrame(update);
            }

            update();
            return { stop: () => cancelAnimationFrame(animationFrameId) };
        }

        function animateMaxwellWave() {
            const canvas = document.getElementById('maxwell-canvas');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            let time = 0;
            let animationFrameId;

            function draw() {
                const dpr = window.devicePixelRatio || 1;
                canvas.width = canvas.clientWidth * dpr;
                canvas.height = canvas.clientHeight * dpr;
                ctx.scale(dpr, dpr);
                const w = canvas.clientWidth;
                const h = canvas.clientHeight;
                
                ctx.clearRect(0, 0, w, h);
                ctx.strokeStyle = '#94a3b8';
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(10, h / 2);
                ctx.lineTo(w - 10, h / 2);
                ctx.stroke();

                const amplitude = h / 4;
                const frequency = 5;
                
                ctx.lineWidth = 2.5;
                ctx.strokeStyle = '#3b82f6'; 
                ctx.beginPath();
                for (let x = 0; x < w; x++) {
                    let y = h / 2 + amplitude * Math.sin((x / w) * frequency - time);
                    if (x === 0) ctx.moveTo(x, y);
                    else ctx.lineTo(x, y);
                }
                ctx.stroke();

                ctx.strokeStyle = '#ef4444'; 
                ctx.beginPath();
                for (let x = 0; x < w; x++) {
                    ctx.save();
                    ctx.translate(x, h/2);
                    ctx.scale(1, 0.4);
                    ctx.beginPath();
                    ctx.arc(0, 0, Math.abs(amplitude * Math.sin((x / w) * frequency - time)), 0, Math.PI * 2);
                    ctx.stroke();
                    ctx.restore();
                }
                
                time += 0.05;
                animationFrameId = requestAnimationFrame(draw);
            }
            draw();
            return { stop: () => cancelAnimationFrame(animationFrameId) };
        }
        
        function animateLorentzForce() {
            const canvas = document.getElementById('lorentz-canvas');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            let animationFrameId;
            let particle = null;

            const chargeSlider = document.getElementById('charge-slider');
            const chargeLabel = document.getElementById('charge-label');
            const launchButton = document.getElementById('launch-particle');

            let charge = 1;

            chargeSlider.oninput = () => {
                charge = parseInt(chargeSlider.value);
                chargeLabel.textContent = charge === 1 ? 'Positive' : 'Negative';
                chargeLabel.style.color = charge === 1 ? '#3b82f6' : '#ef4444';
            };
            chargeSlider.dispatchEvent(new Event('input'));

            launchButton.onclick = () => {
                particle = {
                    x: 30, y: canvas.clientHeight / 2,
                    vx: 3, vy: 0,
                    charge: charge,
                    radius: 5
                };
            };
            
            const B_FIELD_STRENGTH = 0.05;

            function draw() {
                const dpr = window.devicePixelRatio || 1;
                canvas.width = canvas.clientWidth * dpr;
                canvas.height = canvas.clientHeight * dpr;
                ctx.scale(dpr, dpr);
                const w = canvas.clientWidth;
                const h = canvas.clientHeight;
                
                ctx.fillStyle = '#e0f2fe';
                ctx.fillRect(w / 2, 0, w / 2, h);

                ctx.fillStyle = '#475569';
                ctx.font = '12px sans-serif';
                ctx.textAlign = 'center';
                for(let i = 0; i < 5; i++) {
                    for(let j = 0; j < 3; j++) {
                        ctx.fillText('B (in)', w * 0.6 + i * 40, h * 0.2 + j * 50);
                        ctx.beginPath();
                        ctx.arc(w * 0.6 + i * 40, h * 0.2 + j * 50 + 5, 5, 0, Math.PI * 2);
                        ctx.moveTo(w * 0.6 + i * 40 - 2, h * 0.2 + j * 50 + 5 - 2);
                        ctx.lineTo(w * 0.6 + i * 40 + 2, h * 0.2 + j * 50 + 5 + 2);
                        ctx.moveTo(w * 0.6 + i * 40 + 2, h * 0.2 + j * 50 + 5 - 2);
                        ctx.lineTo(w * 0.6 + i * 40 - 2, h * 0.2 + j * 50 + 5 + 2);
                        ctx.stroke();
                    }
                }

                if (particle) {
                    ctx.fillStyle = particle.charge > 0 ? '#3b82f6' : '#ef4444';
                    ctx.beginPath();
                    ctx.arc(particle.x, particle.y, particle.radius, 0, Math.PI * 2);
                    ctx.fill();
                }
            }

            function update() {
                if (particle) {
                    if (particle.x > canvas.clientWidth / 2) {
                        const forceY = particle.charge * particle.vx * B_FIELD_STRENGTH;
                        particle.vy += forceY;
                    }
                    
                    particle.x += particle.vx;
                    particle.y += particle.vy;

                    if (particle.x > canvas.clientWidth || particle.y < 0 || particle.y > canvas.clientHeight) {
                        particle = null;
                    }
                }
                draw();
                animationFrameId = requestAnimationFrame(update);
            }
            update();
            return { stop: () => cancelAnimationFrame(animationFrameId) };
        }

        function animateMotor() {
            const canvas = document.getElementById('motor-canvas');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            let angle = 0;
            let animationFrameId;
            function draw() {
                const dpr = window.devicePixelRatio || 1;
                canvas.width = canvas.clientWidth * dpr;
                canvas.height = canvas.clientHeight * dpr;
                ctx.scale(dpr, dpr);
                const w = canvas.clientWidth;
                const h = canvas.clientHeight;
                ctx.clearRect(0,0,w,h);
                
                ctx.fillStyle = '#ef4444';
                ctx.fillRect(10, h/2 - 50, 30, 100);
                ctx.fillStyle = '#3b82f6';
                ctx.fillRect(w - 40, h/2 - 50, 30, 100);

                ctx.save();
                ctx.translate(w/2, h/2);
                ctx.rotate(angle);
                ctx.strokeStyle = '#475569';
                ctx.lineWidth = 4;
                ctx.strokeRect(-40, -30, 80, 60);
                ctx.restore();

                angle += 0.05;
                animationFrameId = requestAnimationFrame(draw);
            }
            draw();
            return { stop: () => cancelAnimationFrame(animationFrameId) };
        }

        function animateTransformer() {
            const canvas = document.getElementById('transformer-canvas');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            let time = 0;
            let animationFrameId;
            function draw() {
                const dpr = window.devicePixelRatio || 1;
                canvas.width = canvas.clientWidth * dpr;
                canvas.height = canvas.clientHeight * dpr;
                ctx.scale(dpr, dpr);
                const w = canvas.clientWidth;
                const h = canvas.clientHeight;
                ctx.clearRect(0,0,w,h);

                ctx.strokeStyle = '#78716c';
                ctx.lineWidth = 10;
                ctx.strokeRect(w/2 - 60, h/2 - 40, 120, 80);

                const brightness = (Math.sin(time) + 1) / 2;
                ctx.strokeStyle = `rgba(245, 158, 11, ${brightness})`;
                ctx.lineWidth = 2;
                for(let i=0; i<5; i++) {
                    ctx.beginPath();
                    ctx.arc(w/2 - 60, h/2 - 30 + i*15, 10, -Math.PI/2, Math.PI/2);
                    ctx.stroke();
                }
                for(let i=0; i<8; i++) {
                    ctx.beginPath();
                    ctx.arc(w/2 + 60, h/2 - 30 + i*9, 10, Math.PI/2, -Math.PI/2);
                    ctx.stroke();
                }

                time += 0.1;
                animationFrameId = requestAnimationFrame(draw);
            }
            draw();
            return { stop: () => cancelAnimationFrame(animationFrameId) };
        }

        function animateAntenna() {
            const canvas = document.getElementById('antenna-canvas');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            let time = 0;
            let animationFrameId;
            function draw() {
                const dpr = window.devicePixelRatio || 1;
                canvas.width = canvas.clientWidth * dpr;
                canvas.height = canvas.clientHeight * dpr;
                ctx.scale(dpr, dpr);
                const w = canvas.clientWidth;
                const h = canvas.clientHeight;
                ctx.clearRect(0,0,w,h);

                ctx.strokeStyle = '#1c1917';
                ctx.lineWidth = 3;
                ctx.beginPath();
                ctx.moveTo(w/2, h);
                ctx.lineTo(w/2, h/2);
                ctx.stroke();

                for(let i=1; i<5; i++) {
                    const radius = (time % 50) + i * 20;
                    const opacity = 1 - (radius / 150);
                    if (opacity > 0) {
                        ctx.strokeStyle = `rgba(245, 158, 11, ${opacity})`;
                        ctx.beginPath();
                        ctx.arc(w/2, h/2, radius, -Math.PI * 0.8, -Math.PI * 0.2);
                        ctx.stroke();
                    }
                }

                time += 1;
                animationFrameId = requestAnimationFrame(draw);
            }
            draw();
            return { stop: () => cancelAnimationFrame(animationFrameId) };
        }

        document.addEventListener('DOMContentLoaded', () => {
            setupNavigation();
            setupLawNavigation();
        });
    </script>
</body>
</html>
